---
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
const featuredIds = [1, 0, 6];
const featuredProjects = projects
    .filter((project) => featuredIds.includes(project.data.id))
    .sort((a, b) => {
        const aIndex = featuredIds.indexOf(a.data.id);
        const bIndex = featuredIds.indexOf(b.data.id);
        return aIndex - bIndex;
    });
---

<section id="projects" class="bg-white py-16 md:py-24">
    <div class="max-w-4xl mx-auto px-6 md:px-8">
        <div class="space-y-12">
            <div>
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Featured Projects
                </h2>
                <p class="text-lg text-gray-600 max-w-2xl">
                    Selected work demonstrating experience with operational
                    systems, healthcare software, and full-project ownership.
                </p>
            </div>

            <div class="space-y-8">
                {
                    featuredProjects.map((project, index) => (
                        <article class="group bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 md:p-8 hover:shadow-lg hover:border-primary-300 transition-all duration-300">
                            <div class="space-y-4">
                                <div class="flex items-start justify-between gap-4">
                                    <div class="flex-1">
                                        <div class="inline-block px-3 py-1 bg-primary-100 text-primary-700 text-xs font-semibold rounded-full mb-3">
                                            {index === 0
                                                ? 'Freelance Project'
                                                : index === 1
                                                  ? 'SaaS'
                                                  : 'Freelance Project'}
                                        </div>
                                        <h3 class="text-xl md:text-2xl font-bold text-gray-900 group-hover:text-primary-600 transition-colors">
                                            {project.data.title}
                                        </h3>
                                    </div>
                                </div>

                                <div class="flex flex-wrap gap-2">
                                    {project.data.tags.map((tag: string) => (
                                        <span class="px-3 py-1 text-xs font-medium bg-white border border-gray-200 text-gray-700 rounded-full">
                                            {tag}
                                        </span>
                                    ))}
                                </div>

                                <div class="pt-2">
                                    {index === 0 && (
                                        <div class="space-y-3">
                                            <p class="text-gray-700 leading-relaxed">
                                                Custom Odoo development for
                                                catch-weight operations in dairy
                                                manufacturing. Managed full
                                                project lifecycle from discovery
                                                to deployment, including CI/CD
                                                pipeline setup. Ongoing
                                                maintenance relationship.
                                            </p>
                                            <p class="text-sm text-gray-500 font-medium">
                                                May-Aug 2025, Ongoing
                                                Maintenance
                                            </p>
                                        </div>
                                    )}
                                    {index === 1 && (
                                        <div class="space-y-3">
                                            <p class="text-gray-700 leading-relaxed">
                                                Building a daily records and
                                                workflow management system for
                                                retirement homes in Mexico.
                                                Early-stage exploration focused
                                                on operational workflows and
                                                care documentation, with
                                                compliance planning for future
                                                phases.
                                            </p>
                                            <p class="text-sm text-gray-500 font-medium">
                                                In Development — Exploring
                                                product-market fit
                                            </p>
                                        </div>
                                    )}
                                    {index === 2 && (
                                        <div class="space-y-3">
                                            <p class="text-gray-700 leading-relaxed">
                                                Worked in the development of web
                                                platform for Latin Food 2024
                                                event registration with a team
                                                of developers. Responsibilities
                                                included architecture design,
                                                automated AWS deployment
                                                pipeline via GitHub Actions, and
                                                consulting on full-stack
                                                development.
                                            </p>
                                            <p class="text-sm text-gray-500 font-medium">
                                                Completed 2024 — Event concluded
                                                November 2024
                                            </p>
                                        </div>
                                    )}
                                </div>

                                <div class="pt-2">
                                    <a
                                        href={`${import.meta.env.BASE_URL}/project/${project.slug}/`}
                                        class="inline-flex items-center text-sm font-semibold text-primary-600 hover:text-primary-700 group-hover:gap-2 gap-1 transition-all"
                                    >
                                        View details
                                        <svg
                                            class="w-4 h-4 transition-transform"
                                            fill="none"
                                            viewBox="0 0 24 24"
                                            stroke="currentColor"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M9 5l7 7-7 7"
                                            />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </article>
                    ))
                }
            </div>
        </div>
    </div>
</section>
